import { useState } from "react";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Textarea } from "@/components/ui/textarea";

export default function MainPage() {
  const [view, setView] = useState("main");
  const [jobNumber, setJobNumber] = useState("");
  const [report, setReport] = useState("");
  const [mixDesign, setMixDesign] = useState("");
  const [selectedTest, setSelectedTest] = useState("");
  const [customTest, setCustomTest] = useState("");

  // Fix for "Soil" dropdown issue
  const handleTestChange = (e) => {
    const value = e.target.value;
    setSelectedTest(value);
    if (value !== "Other") {
      setCustomTest(""); // Clear custom test if not "Other"
    }
  };

  return (
    <div className="p-6 space-y-6 max-w-2xl mx-auto text-center">
      <h1 className="text-3xl font-bold mb-6">ENGEO INCORPORATED</h1>

      {/* Main Page */}
      {view === "main" && (
        <div className="flex flex-col space-y-4">
          <Button className="bg-blue-600 text-white" onClick={() => setView("field")}>
            Field Inspections
          </Button>
        </div>
      )}

      {/* Field Inspections */}
      {view === "field" && (
        <div className="flex flex-col space-y-4">
          <Button className="bg-blue-600 text-white" onClick={() => setView("dailyObservation")}>
            Add Daily Field Observation
          </Button>
          <Button className="bg-blue-600 text-white" onClick={() => setView("sampling")}>
            Sampling
          </Button>
          <Button variant="outline" onClick={() => setView("main")}>Back</Button>
        </div>
      )}

      {/* Daily Field Observation */}
      {view === "dailyObservation" && (
        <div className="flex flex-col space-y-4">
          <Input
            placeholder="Job Number"
            value={jobNumber}
            onChange={(e) => setJobNumber(e.target.value)}
          />
          <Textarea
            placeholder="Observation Report"
            value={report}
            onChange={(e) => setReport(e.target.value)}
          />
          <Button variant="outline" onClick={() => setView("field")}>Back</Button>
        </div>
      )}

      {/* Sampling Main Menu */}
      {view === "sampling" && (
        <div className="flex flex-col space-y-4">
          <Button className="bg-blue-600 text-white" onClick={() => setView("soil")}>
            Soil
          </Button>
          <Button className="bg-blue-600 text-white" onClick={() => setView("concrete")}>
            Concrete
          </Button>
          <Button className="bg-blue-600 text-white" onClick={() => setView("grout")}>
            Grout
          </Button>
          <Button className="bg-blue-600 text-white" onClick={() => setView("otherSampling")}>
            Other
          </Button>
          <Button variant="outline" onClick={() => setView("field")}>Back</Button>
        </div>
      )}

      {/* Soil Sampling */}
      {view === "soil" && (
        <div className="flex flex-col space-y-4">
          <Input
            placeholder="Job Number"
            value={jobNumber}
            onChange={(e) => setJobNumber(e.target.value)}
          />
          <select
            className="border p-2 rounded"
            value={selectedTest}
            onChange={handleTestChange}  // Using handleTestChange
          >
            <option value="">Select Soil Test</option>
            <option value="Proctor">Proctor</option>
            <option value="Sieve Wash">Sieve Wash</option>
            <option value="PI">PI</option>
            <option value="Other">Other</option>
          </select>

          {selectedTest === "Other" && (
            <Input
              placeholder="Enter Custom Test"
              value={customTest}
              onChange={(e) => setCustomTest(e.target.value)}
            />
          )}

          <Button variant="outline" onClick={() => setView("sampling")}>Back</Button>
        </div>
      )}

      {/* Concrete Sampling */}
      {view === "concrete" && (
        <div className="flex flex-col space-y-4">
          <Input
            placeholder="Job Number"
            value={jobNumber}
            onChange={(e) => setJobNumber(e.target.value)}
          />
          <Input
            placeholder="Concrete Mix Design & Strength"
            value={mixDesign}
            onChange={(e) => setMixDesign(e.target.value)}
          />
          <div className="space-y-2">
            <p>7 Day Cylinder: 1</p>
            <p>28 Day Cylinders: 3</p>
          </div>
          <Button variant="outline" onClick={() => setView("sampling")}>Back</Button>
        </div>
      )}

      {/* Grout Sampling */}
      {view === "grout" && (
        <div className="flex flex-col space-y-4">
          <Input
            placeholder="Job Number"
            value={jobNumber}
            onChange={(e) => setJobNumber(e.target.value)}
          />
          <Input
            placeholder="Grout Mix Design & Strength"
            value={mixDesign}
            onChange={(e) => setMixDesign(e.target.value)}
          />
          <div className="space-y-2">
            <p>7 Day Cylinder: 1</p>
            <p>28 Day Cylinders: 3</p>
          </div>
          <Button variant="outline" onClick={() => setView("sampling")}>Back</Button>
        </div>
      )}

      {/* Other Sampling */}
      {view === "otherSampling" && (
        <div className="flex flex-col space-y-4">
          <Input
            placeholder="Job Number"
            value={jobNumber}
            onChange={(e) => setJobNumber(e.target.value)}
          />
          <Textarea
            placeholder="Enter Test(s) to be Ran"
            value={customTest}
            onChange={(e) => setCustomTest(e.target.value)}
          />
          <Button variant="outline" onClick={() => setView("sampling")}>Back</Button>
        </div>
      )}
    </div>
  );
}
